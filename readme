readme

cp /nginx-1.28.0/conf/nginx.conf /nginx-1.28.0/conf/nginx.conf.backup.20260106
# ë°©ë²• 1: ìš°ì•„í•œ ì¬ì‹œì‘ (ê¶Œì¥)
nginx.exe -s reload

# ë°©ë²• 2: ì™„ì „ ì¬ì‹œì‘
nginx.exe -s stop
nginx.exe
Step 5: ë¡œê·¸ ëª¨ë‹ˆí„°ë§
bash# ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸
tail -f /nginx/error.log
tail -f /nginx/access.log

# ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ ìˆ˜ëŠ” CPU ì½”ì–´ ìˆ˜ì— ë§ê²Œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ì•¼ (autoë¡œ ì„¤ì • ê°€ëŠ¥)
worker_processes  auto;

# pid        logs/nginx.pid; # pid íŒŒì¼ ê²½ë¡œê°€ í•„ìš”í•˜ë‹¤ë©´ ì£¼ì„ í•´ì œ

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    server_names_hash_bucket_size 64;
	
    server_tokens off;
	
    client_max_body_size  2G;

    # =================================================================
    # ë¡œê·¸ ì„¤ì •
    # =================================================================
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$upstream_addr"';

    access_log access.log  main;
    error_log  /error.log   warn;

    sendfile        on;
    tcp_nopush      on;
    keepalive_timeout  65;

    # =================================================================
    # HTTP(80) â†’ HTTPS(443) ë¦¬ë‹¤ì´ë ‰íŠ¸
    # ğŸ”§ ìˆ˜ì •: ì ‘ì†í•œ ë„ë©”ì¸ ê·¸ëŒ€ë¡œ HTTPSë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    # =================================================================
    server {
        listen       80;
        server_name  g..com g-i 1.c.com 2.com localhost;

        return 301 https://$host$request_uri;
    }

    # =================================================================
    # PC ì›¹ ì„œë¹„ìŠ¤ìš© HTTPS ì„œë²„ (í¬íŠ¸ 443) - ê³µê°œ ë„ë©”ì¸
    # ğŸ”§ ê¸°ì¡´: gics, g-ics ë„ë©”ì¸ ì²˜ë¦¬
    # =================================================================
    server {
        listen       443 ssl http2;
        server_name  s. g-i localhost;
		
        if ($request_method = TRACE) {
            return 405;
        }
		
        # gzip ì„¤ì •
        gzip on;
        gzip_vary on;
        gzip_proxied any;
        gzip_comp_level 5;
        gzip_min_length 1024;
        gzip_buffers 16 8k;
        gzip_http_version 1.1;
        gzip_types text/plain text/css application/json application/javascript application/x-javascript text/xml application/xml application/xml+rss text/javascript image/svg+xml;

        # SSL/TLS ë³´ì•ˆ ì„¤ì •
        ssl_certificate      t.pem;
        ssl_certificate_key  ey.pem;
        ssl_session_cache    shared:SSL:10m;
        ssl_session_timeout  10m;
        ssl_protocols TLSv1.2 TLSv1.3;
        ssl_ciphers 'TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384';
        ssl_prefer_server_ciphers on;
        add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;

        location / {
            proxy_pass         http://localhost:8080;
            proxy_set_header   Host $host;
            proxy_set_header   X-Real-IP $remote_addr;
            proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header   X-Forwarded-Proto $scheme;
            proxy_set_header   X-Rapweb-Service-Token $http_x_rapweb_service_token;
        }
    }

    # =================================================================
    # ğŸ†• ì‚¬ë‚´ë§ ì „ìš© HTTPS ì„œë²„ (í¬íŠ¸ 443) - gics1.ls-electric.com
    # ğŸ”’ ë³´ì•ˆ: ì‚¬ë‚´ë§ IPì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥
    # =================================================================
    server {
        listen       443 ssl http2;
        server_name  1..com;
		
        if ($request_method = TRACE) {
            return 405;
        }
		
        # gzip ì„¤ì •
        gzip on;
        gzip_vary on;
        gzip_proxied any;
        gzip_comp_level 5;
        gzip_min_length 1024;
        gzip_buffers 16 8k;
        gzip_http_version 1.1;
        gzip_types text/plain text/css application/json application/javascript application/x-javascript text/xml application/xml application/xml+rss text/javascript image/svg+xml;

        # SSL/TLS ë³´ì•ˆ ì„¤ì •
        ssl_certificate      pem;
        ssl_certificate_key  pem;
        ssl_session_cache    shared:SSL:10m;
        ssl_session_timeout  10m;
        ssl_protocols TLSv1.2 TLSv1.3;
        ssl_ciphers 'TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384';
        ssl_prefer_server_ciphers on;
        add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;

        location / {
          
            proxy_pass         http://1:8080;
            proxy_set_header   Host $host;
            proxy_set_header   X-Real-IP $remote_addr;
            proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header   X-Forwarded-Proto $scheme;
            proxy_set_header   X-Rapweb-Service-Token $http_x_rapweb_service_token;
            
            # í”„ë¡ì‹œ íƒ€ì„ì•„ì›ƒ ì„¤ì •
            proxy_connect_timeout 60s;
            proxy_send_timeout 60s;
            proxy_read_timeout 60s;
        }
    }

    # =================================================================
    # ğŸ†• ì‚¬ë‚´ë§ ì „ìš© HTTPS ì„œë²„ (í¬íŠ¸ 443) - gics2.ls-electric.com
    # ğŸ”’ ë³´ì•ˆ: ì‚¬ë‚´ë§ IPì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥
    # =================================================================
    server {
        listen       443 ssl http2;
        server_name  2.com;
		
        if ($request_method = TRACE) {
            return 405;
        }
		
        # gzip ì„¤ì •
        gzip on;
        gzip_vary on;
        gzip_proxied any;
        gzip_comp_level 5;
        gzip_min_length 1024;
        gzip_buffers 16 8k;
        gzip_http_version 1.1;
        gzip_types text/plain text/css application/json application/javascript application/x-javascript text/xml application/xml application/xml+rss text/javascript image/svg+xml;

        # SSL/TLS ë³´ì•ˆ ì„¤ì •
        ssl_certificate      pem;
        ssl_certificate_key  pem;
        ssl_session_cache    shared:SSL:10m;
        ssl_session_timeout  10m;
        ssl_protocols TLSv1.2 TLSv1.3;
        ssl_ciphers 'TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384';
        ssl_prefer_server_ciphers on;
        add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;

        location / {
            
            proxy_pass         http://2:8080;
            proxy_set_header   Host $host;
            proxy_set_header   X-Real-IP $remote_addr;
            proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header   X-Forwarded-Proto $scheme;
            proxy_set_header   X-Rapweb-Service-Token $http_x_rapweb_service_token;
            
            # í”„ë¡ì‹œ íƒ€ì„ì•„ì›ƒ ì„¤ì •
            proxy_connect_timeout 60s;
            proxy_send_timeout 60s;
            proxy_read_timeout 60s;
        }
    }
	
    # =================================================================
    # Jenkins ì„œë¹„ìŠ¤ìš© HTTPS ì„œë²„ (í¬íŠ¸ 9090)
    # =================================================================
    server {
        listen       9090 ssl http2;
        server_name  com;

        ssl_certificate      pem;
        ssl_certificate_key  pem;
        ssl_session_cache    shared:SSL:10m;
        ssl_session_timeout  10m;
        ssl_protocols TLSv1.2 TLSv1.3;
        ssl_ciphers 'TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384';
        ssl_prefer_server_ciphers on;
        add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;

        location = /jenkins {
            return 301 /jenkins/;
        }
		
        location /jenkins/ {
            proxy_pass         http://localhost:8090;
            proxy_set_header   Host $host;
            proxy_set_header   X-Real-IP $remote_addr;
            proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header   X-Forwarded-Proto $scheme;
        }
    }
	
    # =================================================================
    # ëª¨ë°”ì¼ í˜ì´ì§€ ë° íŒŒì¼ ì„œë¹„ìŠ¤ìš© HTTPS ì„œë²„ (í¬íŠ¸ 8443)
    # =================================================================
    server {
        listen       8443 ssl http2;
        server_name  gics.ls-electric.com g-ics.ls-electric.com;
		
        if ($request_method = TRACE) {
            return 405;
        }

        ssl_certificate      
        ssl_certificate_key  
        ssl_session_cache    shared:SSL:10m;
        ssl_session_timeout  10m;
        ssl_protocols TLSv1.2 TLSv1.3;
        ssl_ciphers 'TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384';
        ssl_prefer_server_ciphers on;
        add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
		
        # 1) /app-download/ â†’ ë¸Œë¼ìš°ì €ì—ì„œ ë°”ë¡œ í‘œì‹œ
        location ^~ /app-download/ {
            alias download/;
            autoindex on;
            try_files $uri =404;
            add_header X-Content-Type-Options "nosniff" always;
            charset utf-8;
        }

        # 2) /file/ â†’ ê°•ì œ ë‹¤ìš´ë¡œë“œ
        location ^~ /file/ {
            alias app-download/;
            autoindex on;
            try_files $uri =404;
            add_header Content-Disposition "attachment" always;
            add_header X-Content-Type-Options "nosniff" always;
            types { }
            default_type application/octet-stream;
        }

        # 3) ë‚˜ë¨¸ì§€ ë¼ìš°íŒ… (ë¦¬ì•¡íŠ¸ ì•±)
        location / {
            root   mobile/;
            index  index.html;
            try_files  $uri $uri/ /index.html;
            charset  utf-8;
        }
    }
}
